{% load static %}
{% load i18n %}

<!DOCTYPE html>
<html lang="{% get_current_language as LANGUAGE_CODE %}{{ LANGUAGE_CODE|default:'en' }}">
<head>
    <meta charset="UTF-8">
    {% if not on_top_page %}
    <meta name="robots" content="noindex, nofollow">
    {% endif %}
    <title>{% trans "Kanji Ateji Generator" %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container py-5">
    <div class="text-center mb-4">
        <img src="{% static 'images/shop_logo.png' %}" style="max-width:100px;">
        <h1 class="fw-bold mb-3">{% trans "Kanji Ateji Generator" %}</h1>
        {# -- Language Switching -- #}
        <div style="max-width:350px;margin:auto;">
            <div class="input-group">
                <select id="languageSelect" class="form-select">
                    {% get_current_language as LANGUAGE_CODE %}
                    {% get_available_languages as LANGUAGES %}
                    {% for code, name in LANGUAGES %}
                        <option value="{{ code }}" {% if LANGUAGE_CODE == code %}selected{% endif %}>{{ name }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
    </div>
    <div class="text-center mt-4">
        <a href="{% url 'ateji_form' %}?name={{ name|urlencode }}&num_candidates={{ num_candidates }}&mode={{ mode }}&font={{ font }}"
            class="btn btn-primary btn-lg">
            {% trans "Go to Ateji Convert" %}
        </a>
    </div>
</div>
<script>
document.getElementById('languageSelect').addEventListener('change', function() {
    var lang = this.value;
    var path = window.location.pathname;
    var newPath = path.replace(/^\/[a-z\-]+(\/|$)/, '/' + lang + '/');
    if (newPath === path) {
        newPath = '/' + lang + path;
    }
    window.location.href = newPath + window.location.search;
});
</script>
</body>
</html>
