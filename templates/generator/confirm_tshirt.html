{% load humanize %}
{% load kanji_meaning_lookup %}
{% load static %}
{% load i18n %}


<!DOCTYPE html>
<html lang="{% get_current_language as LANGUAGE_CODE %}{{ LANGUAGE_CODE|default:'en' }}">
<head>
    <meta charset="UTF-8">
    {% if not on_top_page %}
    <meta name="robots" content="noindex, nofollow">
    {% endif %}
    <title>{% trans "Confirm T-Shirt Design" %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
      .confirm-card { max-width: 420px; margin: 0 auto; }
      .form-label { font-weight:bold;}
    </style>
</head>
<body>
<div class="container py-5">
    <h2 class="mb-4 text-center">{% trans "Confirm Your T-Shirt Design" %}</h2>
    <div class="card text-center mb-4 confirm-card shadow">
        <div class="card-body">
            <img class="mb-3"
                 width="300" height="300"
                 src="{% url 'kanji_image' %}?kanji={{ kanji|urlencode }}&mode={{ mode }}&font={{ font }}"
                 alt="{{ kanji }} image">
            <h3 class="mb-2">{{ kanji }}</h3>
            <div class="mb-2">
                <span class="badge bg-secondary fs-6">{{ reading }}</span>
            </div>
            <div class="mb-3 small">
                {{ meaning_str }}
            </div>
            <!-- Order -->
            <form action="{% url 'tshirt_order' %}" method="post" class="mb-2">
                {% csrf_token %}
                <input type="hidden" name="kanji" value="{{ kanji }}">
                <input type="hidden" name="reading" value="{{ reading }}">
                <input type="hidden" name="parts" value="{{ parts }}">
                <input type="hidden" name="mode" value="{{ mode }}">
                <input type="hidden" name="font" value="{{ font }}">
                <input type="hidden" name="name" value="{{ name }}">
                <input type="hidden" name="num_candidates" value="{{ num_candidates }}">
                <div class="mb-3 text-start">
                    <label class="form-label">{% trans "T-shirt Size" %}</label>
                    <select name="size" class="form-select" required>
                        {% for s in sizes %}
                        <option value="{{ s.0 }} (Chest {{ s.1 }}cm)">
                            {{ s.0 }} (Chest {{ s.1 }}cm)
                        </option>
                        {% endfor %}
                    </select>
                </div>
                <div class="mb-3 text-start">
                    <label class="form-label">{% trans "Body Color" %}</label>
                    <select name="body_color" class="form-select" required>
                        {% for c in body_colors %}
                        <option value="{{ c }}">{{ c|title }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="mb-3 text-start">
                    <label class="form-label">{% trans "Print Color" %}</label>
                    <select name="text_color" class="form-select" required>
                        {% for c in text_colors %}
                        <option value="{{ c }}">{{ c|title }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="mb-3 fs-4 text-start">
                    {% blocktrans with price=price|intcomma %}
                        Price: <strong>Â¥{{ price }}</strong> <span class="fs-6">(tax included)</span>
                    {% endblocktrans %}
                </div>
                <button type="submit" class="btn btn-primary mb-2 w-100">
                    {% trans "Yes, make a T-shirt with this Kanji!" %}
                </button>
            </form>
            <!-- Return to search results screen -->
            <form action="{% url 'ateji_form' %}" method="post">
                {% csrf_token %}
                <input type="hidden" name="name" value="{{ name }}">
                <input type="hidden" name="num_candidates" value="{{ num_candidates }}">
                <input type="hidden" name="mode" value="{{ mode }}">
                <input type="hidden" name="font" value="{{ font }}">
                <button type="submit" class="btn btn-outline-secondary w-100">{% trans "Cancel" %}</button>
            </form>
        </div>
    </div>
</div>
</body>
</html>
