{% load i18n %}
{% load humanize %}
{% load kanji_meaning_lookup %}

<!DOCTYPE html>
<html lang="{% get_current_language as LANGUAGE_CODE %}{{ LANGUAGE_CODE|default:'en' }}">
<head>
    <meta charset="UTF-8">
    {% if not on_top_page %}
    <meta name="robots" content="noindex, nofollow">
    {% endif %}
    <title>{% trans "Order Details" %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .order-details { background: #f9f9f9; padding: 2em 2em 1em 2em; border-radius: 10px; max-width: 92vw; margin: 40px auto; box-shadow: 0 2px 10px #0001; text-align: center; }
        .order-title { font-size: 4em; font-weight: bold; color: #269;}
        .order-id   { font-size: 2.4em; color: #333; margin-bottom: 1em;}
        .order-data th { text-align: right; width: 16em;}
        .qrcode, .barcode { margin: 1.3em auto; }
        .qrcode img, .barcode img { background: #fff; padding: 3px; }
        .alert-info { margin-top: 1.5em;}
    </style>
</head>
<body>
<div class="order-details">
    <div class="order-title">{% trans "Thank you for your order!" %}</div>
    <div class="order-id mb-2">{% blocktrans with order_no=order_url %}Order No. {{ order_no }}{% endblocktrans %}</div>
    <div class="alert alert-info mb-2 fs-2">
        {% trans "Please take a screenshot of this page and show it to the cashier if needed." %}<br>
        <span class="small text-muted fs-3">{% trans "Please save a screenshot of this page." %}</span>
    </div>
    <div class="barcode mb-2">
        <div class="fw-bold fs-1">{% trans "JAN Code" %}</div>
        <img src="data:image/png;base64,{{ barcode_base64 }}" alt="{% trans 'JAN Code' %}" height="100" width="500">
    </div>
    <div class="qrcode mb-2">
        <div class="fw-bold fs-1">{% trans "QR Code" %}</div>
        <img src="data:image/png;base64,{{ qr_base64 }}" width="300" height="300" alt="{% trans 'QR Code' %}">
        <div class="small text-muted mt-2 text-break" style="word-break: break-all;">
            <code>
                {{ qr_json|safe }}
            </code>
        </div>
    </div>
    <table class="table order-data">
        <tr><th><span class="fw-bold fs-2">{% trans "Kanji:" %}         </span></th><td><span class="fw-bold fs-1">{{ order.kanji }}           </span></td></tr>
        <tr><th><span class="fw-bold fs-2">{% trans "Reading:" %}       </span></th><td><span class="fw-bold fs-2">{{ order.reading }}         </span></td></tr>
        <tr><th><span class="fw-bold fs-2">{% trans "Meaning:" %}       </span></th><td><span class="fw-bold fs-2">{{ order.meaning }}         </span></td></tr>
        <tr><th><span class="fw-bold fs-2">{% trans "Font:" %}          </span></th><td><span class="fw-bold fs-2">{{ order.font }}            </span></td></tr>
        <tr><th><span class="fw-bold fs-2">{% trans "Print Mode:" %}    </span></th><td><span class="fw-bold fs-2">{{ order.mode }}            </span></td></tr>
        <tr><th><span class="fw-bold fs-2">{% trans "Size:" %}          </span></th><td><span class="fw-bold fs-2">{{ order.size }}            </span></td></tr>
        <tr><th><span class="fw-bold fs-2">{% trans "Body Color:" %}    </span></th><td><span class="fw-bold fs-2">{{ order.body_color|title }}</span></td></tr>
        <tr><th><span class="fw-bold fs-2">{% trans "Print Color:" %}   </span></th><td><span class="fw-bold fs-2">{{ order.text_color|title }}</span></td></tr>
        <tr>
            <th><span class="fw-bold fs-2">{% trans "Price:" %}</span></th>
            <td>
                {% blocktrans with price=order.price|intcomma %}
                    <span class="fw-bold fs-1"><strong>Â¥{{ price }}</strong> ({{ _("tax included") }})</span>
                {% endblocktrans %}
            </td>
        </tr>
        <tr><th><span class="fw-bold fs-2">{% trans "JAN:" %}</span></th>          <td><span class="fw-bold fs-2">{{ jan_code }}</span></td></tr>
        <tr>
            <th><span class="fw-bold fs-2">{% trans "Date:" %}</span></th>
            <td><span class="fw-bold fs-2">{{ order.created_at|date:'Y-m-d H:i' }}</span></td>
        </tr>
    </table>
    <a href="{% url 'home' %}" class="btn btn-primary mt-3 fs-2">{% trans "Back to Top" %}</a>
</div>
</body>
</html>
