{% load i18n %}
{% load humanize %}
{% load kanji_meaning_lookup %}

<!DOCTYPE html>
<html lang="{% get_current_language as LANGUAGE_CODE %}{{ LANGUAGE_CODE|default:'en' }}">
<head>
    <meta charset="UTF-8">
    {% if not on_top_page %}
    <meta name="robots" content="noindex, nofollow">
    {% endif %}
    <title>{% trans "Order Details" %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .order-details { background: #f9f9f9; padding: 2em 2em 1em 2em; border-radius: 10px; max-width: 480px; margin: 40px auto; box-shadow: 0 2px 10px #0001; text-align: center; }
        .order-title { font-size: 2em; font-weight: bold; color: #269;}
        .order-id   { font-size: 1.2em; color: #333; margin-bottom: 0.5em;}
        .order-data th { text-align: right; width: 8em;}
        .qrcode, .barcode { margin: 1.3em auto; }
        .qrcode img, .barcode img { background: #fff; padding: 3px; }
        .alert-info { margin-top: 1.5em;}
    </style>
</head>
<body>
<div class="order-details">
    <div class="order-title">{% trans "Thank you for your order!" %}</div>
    <div class="order-id mb-2">{% blocktrans with order_no=order_url %}Order No. {{ order_no }}{% endblocktrans %}</div>
    <div class="alert alert-info mb-2">
        {% trans "Please take a screenshot of this page and show it to the cashier if needed." %}<br>
        <span class="small text-muted">{% trans "Please save a screenshot of this page." %}</span>
    </div>
    <div class="barcode mb-2">
        <div class="fw-bold">{% trans "JAN Code" %}</div>
        <img src="data:image/png;base64,{{ barcode_base64 }}" alt="{% trans 'JAN Code' %}" height="50" width="300">
    </div>
    <div class="qrcode mb-2">
        <div class="fw-bold">{% trans "QR Code" %}</div>
        <img src="data:image/png;base64,{{ qr_base64 }}" width="130" height="130" alt="{% trans 'QR Code' %}">
        <div class="small text-muted mt-2 text-break" style="word-break: break-all;">
            <code>
                {{ qr_json|safe }}
            </code>
        </div>
    </div>
    <table class="table order-data">
        <tr><th>{% trans "Kanji:" %}</th>        <td><span class="fw-bold fs-3">{{ order.kanji }}</span></td></tr>
        <tr><th>{% trans "Reading:" %}</th>      <td>{{ order.reading }}</td></tr>
        <tr><th>{% trans "Meaning:" %}</th>      <td>{{ order.meaning }}</td></tr>
        <tr><th>{% trans "Font:" %}</th>         <td>{{ order.font }}</td></tr>
        <tr><th>{% trans "Print Mode:" %}</th>   <td>{{ order.mode }}</td></tr>
        <tr><th>{% trans "Size:" %}</th>         <td>{{ order.size }}</td></tr>
        <tr><th>{% trans "Body Color:" %}</th>   <td>{{ order.body_color|title }}</td></tr>
        <tr><th>{% trans "Print Color:" %}</th>  <td>{{ order.text_color|title }}</td></tr>
        <tr>
            <th>{% trans "Price:" %}</th>
            <td>
                {% blocktrans with price=order.price|intcomma %}
                    <strong>Â¥{{ price }}</strong> ({{ _("tax included") }})
                {% endblocktrans %}
            </td>
        </tr>
        <tr><th>{% trans "JAN:" %}</th>          <td>{{ jan_code }}</td></tr>
        <tr>
            <th>{% trans "Date:" %}</th>
            <td>{{ order.created_at|date:'Y-m-d H:i' }}</td>
        </tr>
    </table>
    <a href="{% url 'home' %}" class="btn btn-primary mt-3">{% trans "Back to Top" %}</a>
</div>
</body>
</html>
